//
// Define a set of common settings for all projects, and include
// all the 2.12 projects. The included file also contains a large set of
// vars definitions, which are used later in this file as well.
//


vars.base: {
}
include file("common.conf")

//
// And the generation of the artifacts more closely related to the Scala compiler.
//
build += {
  extraction-version: "2.12.0-M3"
  cross-version: disabled
  sbt-version: ${vars.sbt-version-override}
  space.from: default
  space.to: [ default, specs2_36, specs2_24 ]
  projects: [
  // Scala 2.12.x
  {
    name:  "scala",
    system: assemble
    extra.parts: {
      cross-version: standard
      sbt-version: ${vars.sbt-version-override}
      extraction-version: "2.12.0-M3"
      cross-version: disabled
    }
    extra.parts.projects: [
      {
        system: "scala"
        name:  "scala"
        uri:    "https://github.com/"${vars.scala-ref}
        // skip docs to speed up the build
        extra.build-options: ["-Ddocs.skip=1", ${vars.scala-build-bootstrap-opt}, ${vars.scala-build-extra-opt}]
      }
      // override scalaVersion in the modules since otherwise we get
      // whatever random Scala version the module has -- it might be a
      // 2.12.x version, we don't want that!
      {
        name: "scala-xml"
        uri: "https://github.com/"${vars.scala-xml-ref}
        extra.commands: "set scalaVersion := \"2.12.0-213c6d3-nightly\""
      }
      {
        name: "scala-parser-combinators"
        uri: "https://github.com/"${vars.scala-parser-combinators-ref}
        extra.commands: "set scalaVersion := \"2.12.0-213c6d3-nightly\""
        extra.projects: ["scala-parser-combinatorsJVM"]
      }
    ]
  }

  ${vars.base} {
    name: "scala-partest"
    uri: "https://github.com/"${vars.scala-partest-ref}
  }

  ${vars.base} {
    name: scalacheck
    uri:    "https://github.com/"${vars.scalacheck-ref}
    extra.run-tests: false
  }

  ${vars.base} {
    name: "scala-swing"
    uri: "https://github.com/"${vars.scala-swing-ref}
  }
]
}
